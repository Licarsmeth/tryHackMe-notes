## John the Ripper

[Basics 1](https://tryhackme.com/room/johntheripperbasics)

- **Basic commands**
	- Automatic cracking
		- Doesn't specify any hash type
		- Detects automatically, not always reliable
		- `john --wordlist=[path to wordlist] [path to file]`
	- Format specific cracking
		- `john --format=raw-md5 --wordlist=/usr/share/wordlists/rockyou.txt hash_to_crack.txt`
		- When you tell John to use formats, if you’re dealing with a standard hash type, e.g. md5 as in the example above, you have to prefix it with `raw-` to tell John you’re just dealing with a standard hash type, though this doesn’t always apply.
		- To check if you need to add the prefix or not, you can list all of John’s formats using `john --list=formats` and either check manually or grep for your hash type using something like `john --list=formats | grep -iF "md5"`.
	- Unshadowing (Cracking from /etc/shadow)
		- To crack `/etc/shadow` passwords, you must combine it with the `/etc/passwd` file for John to understand the data it’s being given.
		- To do this, we use a tool built into the John suite of tools called `unshadow`. The basic syntax of `unshadow` is as follows:
		- `unshadow [path to passwd] [path to shadow]`

- **Single Crack Mode**
	Username-based password guessing
	- How it works
		- Generates passwords by mangling username (Markus → Markus1, MArkus, Markus!)
	- GECOS integration 
		- Uses /etc/passwd field 5 (full name, office, etc.) for extra candidates
	- File Prep (prepend username:hash):
		- Suppose the username is mike, filename is hashes.txt and the file content is jio322ioj3 then:
		- before:	 jio322ioj3
		- after:	 mike:jio322ioj3
	- Usage
		- `john --single --format=raw-sha256 hashes.txt`
- **John Custom Rules**
	Dynamic wordlist generation using custom rules
	- Location
		- `/etc/john/john.conf` or `/opt/john/john.conf`
	- Rule Format
		- `[List.Rules:THMRules] cAz"[0-9][!@#$]"`
	- Common Modifiers
		-  c          Capitalise first letter (polo → Polo)
		-  Az         Append to end
		-  A0         Prepend to start 
		- [0-9]      Single digit 0-9 
		- [!@#$%^]  - Symbols 
		- [A-Z]   Uppercase letter
	- Transforms: polopassword → PoloPassword1!
	- Command 
		- `john --wordlist=words.txt --rules=THMRules hashfile.txt`
- **zip2john**
	Convert protected ZIP to crackable format
	- Usage:
		- `zip2john zipfile.zip > hash.txt`
	- Crack:
		- `john --wordlist=rockyou.txt hash.txt`
- **rar2john**
	- similar to zip2john but for password-protected rar files
- **ssh2john**
	- to crack the SSH private key password of `id_rsa` files
	- 



<!--stackedit_data:
eyJoaXN0b3J5IjpbLTIzNzE3MjM5MCw2NDkzMjgzMzYsMTkzOD
I2NTUwNSwtMTcwNTA5NDU4NywtNzc1ODAwODA0LC0xODc2NDQ0
MTA5LC0xODM4ODQ1NjMzXX0=
-->